<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TecnoApps - Servicios</title>
    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/animate.css">
    <link href="../css/animate.min.css" rel="stylesheet">
    <link href="../css/stylesserivicios.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      /* Estilos para las tarjetas dinámicas - MISMO ESTILO QUE LAS ESTÁTICAS */
      .servicio-dinamico {
          background: #f1f9f9;
          border-radius: 12px;
          padding: 28px 22px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.06);
          display: flex;
          flex-direction: column;
          justify-content: flex-start;
          height: auto;
          min-height: 350px;
          position: relative;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .servicio-dinamico:hover {
          transform: translateY(-5px);
          box-shadow: 0 8px 15px rgba(0,0,0,0.1);
      }

      /* Imagen - mismo estilo que las estáticas */
      .servicio-dinamico img {
          display: block;
          margin: 14px auto;
          max-width: 55%;
          height: 100px;
          object-fit: contain;
          background: transparent;
          border-radius: 8px;
      }

      /* Título - mismo estilo */
      .servicio-dinamico h3 {
          color: #00040a;
          margin-top: 0;
          margin-bottom: 14px;
          font-size: 20px;
          text-align: center;
          min-height: 60px;
          display: flex;
          align-items: center;
          justify-content: center;
          line-height: 1.3;
      }

      /* Precio */
      .servicio-dinamico .precio {
          font-size: 1.4em;
          font-weight: bold;
          color: #005580;
          margin: 10px 0;
          text-align: center;
      }

      /* Descripción - manejo de texto largo CON COMPATIBILIDAD MEJORADA */
      .servicio-dinamico .descripcion {
          flex: 1;
          overflow: hidden;
          margin-bottom: 10px;
      }

      .servicio-dinamico .descripcion p {
          color: #333;
          line-height: 1.45;
          font-size: 14px;
          margin: 0;
          text-align: center;
          
          /* Compatibilidad completa para truncar texto */
          display: -webkit-box;
          -webkit-line-clamp: 4; /* Máximo 4 líneas */
          -webkit-box-orient: vertical;
          line-clamp: 4; /* Propiedad estándar */
          overflow: hidden;
          text-overflow: ellipsis;
          max-height: 5.8em; /* 4 líneas * 1.45 line-height */
          word-wrap: break-word;
          word-break: break-word;
      }

      /* Badge de promoción */
      .servicio-dinamico .promocion {
          background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
          color: white;
          padding: 6px 14px;
          border-radius: 20px;
          font-size: 0.75em;
          font-weight: bold;
          display: inline-block;
          position: absolute;
          top: 15px;
          right: 15px;
          z-index: 2;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }

      /* Cantidad disponible */
      .servicio-dinamico .cantidad {
          font-size: 0.85em;
          color: #666;
          margin-top: 10px;
          padding-top: 10px;
          border-top: 1px solid #e0e0e0;
          text-align: center;
      }

      /* Contenedor de servicios dinámicos */
      .servicios-dinamicos-container {
          margin: 30px 0;
      }

      /* Título de sección */
      .seccion-titulo {
          text-align: center;
          margin: 40px 0 20px 0;
          color: #002855;
          font-size: 26px;
          font-weight: 700;
          padding-bottom: 10px;
      }

      /* Estados de carga y error */
      .cargando, .error, .no-servicios {
          grid-column: 1 / -1;
          text-align: center;
          padding: 40px;
          font-size: 1.1em;
          color: #666;
          background: #f1f9f9;
          border-radius: 12px;
          margin: 20px 0;
      }

      .error {
          color: #dc3545;
          background: #f8d7da;
      }

      .no-servicios {
          color: #666;
          font-style: italic;
      }

      /* Responsive para imágenes dinámicas */
      @media (min-width: 1200px) {
          .servicio-dinamico img {
              max-width: 60%;
              height: 120px;
          }
      }

      @media (max-width: 600px) {
          .servicio-dinamico img {
              max-width: 70%;
              height: 80px;
          }
          
          .servicio-dinamico h3 {
              font-size: 18px;
              min-height: 50px;
          }
          
          .servicio-dinamico .descripcion p {
              -webkit-line-clamp: 3; /* Menos líneas en móvil */
              line-clamp: 3; /* Propiedad estándar */
              max-height: 4.35em; /* 3 líneas * 1.45 line-height */
          }
      }
    </style>
</head>
<body>
    <header id="header">
        <nav class="navbar navbar-default navbar-static-top" role="banner">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../pages/index.html">
                        <img src="../img/logo_transparente.png" alt="Logo" height="100px">
                        <span class="brand-text">TecnoApps</span>
                    </a>
                </div>
                <div class="collapse navbar-collapse" id="main-navbar">
                    <div class="menu">
                        <ul class="nav nav-tabs navbar-left" role="tablist">
                            <!-- Servicios con submenú -->
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                    Servicios <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="../pages/Resumenservicios.html">Resumen de Servicios</a></li>
                                </ul>
                            </li>
                            <li role="presentation"><a href="../pages/GestionServicios.html">Gestión de servicios</a></li>
                            <li role="presentation"><a href="../pages/contact.html">Contáctanos</a></li>
                            <li role="presentation"><a href="#" onclick="cerrarSesion()">Cerrar sesión</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Servicios -->
    <section class="servicios">
        <h2>Nuestros Servicios</h2>
        <p>
            En TecnoApps ofrecemos soluciones tecnológicas adaptadas a tu negocio. Nuestros principales servicios incluyen soporte en la nube, desarrollo web, seguridad IT y consultoría IT.
        </p>

        <!-- Servicios Dinámicos desde la API -->
        <div class="servicios-dinamicos-container">
            <h3 class="seccion-titulo">Servicios Disponibles</h3>
            <div class="grid-servicios" id="servicios-dinamicos">
                <!-- Los servicios creados en el CRUD aparecerán aquí -->
                <div class="cargando">Cargando servicios...</div>
            </div>
        </div>

        <!-- Servicios Estáticos (los que ya tenías) -->
        <h3 class="seccion-titulo">Nuestros Servicios Principales</h3>
        <div class="grid-servicios">
            <!-- tarjetas de servicios estáticas -->
            <div class="card">
                <h3>Soporte en la Nube</h3>
                <img class="card-img" src="../img/soporte_nube.png" alt="Soporte en la Nube">
                <p>Nuestro equipo está capacitado para brindarte soluciones en la nube que se adaptan a las necesidades de tu empresa.</p>
            </div>
            <div class="card">
                <h3>Desarrollo web</h3>
                <img class="card-img" src="../img/desarrollo_web.png" alt="Desarrollo web">
                <p>Creamos aplicaciones web escalables y centradas en el usuario, garantizando una experiencia fluida y efectiva.</p>
            </div>
            <div class="card">
                <h3>Ciberseguridad</h3>
                <img class="card-img" src="../img/ciberseguridad.png" alt="Ciberseguridad">
                <p>Protección integral contra amenazas digitales: asegura tus datos, sistemas y redes con monitoreo en tiempo real.</p>
            </div>
            <div class="card">
                <h3>Licencias de software</h3>
                <img class="card-img" src="../img/licencias.png" alt="Licencias de software">
                <p>Gestión y provisión de licencias originales para garantizar el uso legal, seguro y actualizado de tus aplicaciones.</p>
            </div>
            <div class="card">
                <h3>Consultoría IT</h3>
                <img class="card-img" src="../img/consultoria.png" alt="Consultoría IT">
                <p>Asesoría especializada para optimizar tu infraestructura tecnológica y alinear la estrategia con los objetivos del negocio.</p>
            </div>
            <div class="card">
                <h3>Análisis de datos</h3>
                <img class="card-img" src="../img/analisis_datos.png" alt="Análisis de datos">
                <p>Transformamos tus datos en información clara y accionable para impulsar decisiones estratégicas.</p>
            </div>
            <div class="card">
                <h3>Optimización SEO</h3>
                <img class="card-img" src="../img/seo.png" alt="Optimización SEO">
                <p>Mejoramos tu visibilidad en buscadores para atraer más tráfico orgánico y clientes potenciales a tu sitio web.</p>
            </div>
            <div class="card">
                <h3>Soporte Técnico</h3>
                <img class="card-img" src="../img/soporte_tecnico.png" alt="Soporte Técnico">
                <p>Asistencia rápida y confiable para resolver incidencias y mantener tus sistemas siempre en funcionamiento.</p>
            </div>
            <div class="card">
                <h3>Redes y Conectividad</h3>
                <img class="card-img" src="../img/redes.png" alt="Redes y Conectividad">
                <p>Diseño y gestión de infraestructuras de red seguras y eficientes para garantizar comunicación sin interrupciones.</p>
            </div>
            <div class="card">
                <h3>Gestión de Infraestructura</h3>
                <img class="card-img" src="../img/infraestructura.png" alt="Gestión de Infraestructura">
                <p>Administramos y optimizamos tus recursos tecnológicos para garantizar disponibilidad, seguridad y rendimiento continuo.</p>
            </div>
        </div>

        <!-- Botón centrado al final -->
        <div class="more-info-wrap">
            <a class="more-info-btn" href="../pages/Resumenservicios.html">Más información</a>
        </div>
    </section>

    <footer>
        <div class="footer-container">
            <div class="col">
                <img src="../img/logo_transparente.png" alt="TecnoApps" class="footer-logo">
                <h3>TecnoApps</h3>
                <p class="footer-p">Empresa de desarrollo de aplicaciones móviles y web, diseño de páginas web y tiendas online en Colombia.</p>
            </div>
            <div class="col">
                <h3 class="h3-serv">Servicios</h3>
                <ul>
                    <li><a href="#">Desarrollo Web</a></li>
                    <li><a href="#">Soporte en la nube</a></li>
                    <li><a href="#">Ciberseguridad</a></li>
                    <li><a href="#">Licencias de software</a></li>
                    <li><a href="#">Consultoría IT</a></li>
                    <li><a href="#">Análisis de datos</a></li>
                    <li><a href="#">Optimización SEO</a></li>
                    <li><a href="#">Soporte técnico</a></li>
                    <li><a href="#">Redes y conectividad</a></li>
                    <li><a href="#">Gestión de infraestructura</a></li>
                </ul>
            </div>
            <div class="col">
                <h3>Contacto</h3>
                <p class="footer-p">3173968717</p>
                <p class="footer-p">nmogollon@poligran.edu.co</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
        <p class="copy">Copyright ©2025 TecnoApps | Todos los derechos reservados</p>
    </footer>

    <!-- Scripts -->
    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/wow.min.js"></script>
    <script>
        const API_URL = 'https://worthy-intuition-production.up.railway.app';
        
        // Cargar servicios dinámicos al iniciar la página
        document.addEventListener('DOMContentLoaded', function() {
            cargarServiciosDinamicos();
            
            // Verificar si el usuario está logueado
            if (!localStorage.getItem("usuarioLogueado")) {
                window.location.href = "login.html";
            }
        });

        // Función para cargar servicios desde la API
        async function cargarServiciosDinamicos() {
            try {
                console.log('🔗 Cargando servicios dinámicos desde:', `${API_URL}/api/servicios`);
                const response = await fetch(`${API_URL}/api/servicios`);
                
                if (!response.ok) {
                    throw new Error(`Error ${response.status}: ${response.statusText}`);
                }
                
                const servicios = await response.json();
                console.log('✅ Servicios cargados:', servicios);
                mostrarServiciosDinamicos(servicios);
                
            } catch (error) {
                console.error('❌ Error al cargar servicios:', error);
                document.getElementById('servicios-dinamicos').innerHTML = 
                    '<div class="error">Error al cargar los servicios. Intenta más tarde.</div>';
            }
        }

        // Función para mostrar los servicios en la página
        function mostrarServiciosDinamicos(servicios) {
            const container = document.getElementById('servicios-dinamicos');
            
            if (!servicios || servicios.length === 0) {
                container.innerHTML = '<div class="no-servicios">No hay servicios disponibles en este momento.</div>';
                return;
            }

            container.innerHTML = servicios.map(servicio => `
                <div class="card servicio-dinamico">
                    ${servicio.promocion ? '<span class="promocion">🔥 Promoción</span>' : ''}
                    ${servicio.imagen ? 
                        `<img src="${API_URL}${servicio.imagen}" alt="${servicio.nombre}" class="card-img">` : 
                        `<img src="../img/servicio-default.png" alt="Servicio" class="card-img">`
                    }
                    <h3>${servicio.nombre}</h3>
                    <div class="precio">$${servicio.precio ? servicio.precio.toLocaleString() : '0'}</div>
                    <div class="descripcion">
                        <p>${servicio.descripcion || 'Sin descripción disponible'}</p>
                    </div>
                    <div class="cantidad">Disponible: ${servicio.cantidad || '0'} unidades</div>
                </div>
            `).join('');
        }

        // Función para cerrar sesión
        function cerrarSesion() {
            if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
                localStorage.removeItem("usuarioLogueado");
                window.location.href = "login.html";
            }
        }

        // Inicializar WOW.js
        wow = new WOW({}).init();
    </script>
</body>
</html>